!function(){function a(){"use strict";String.prototype.format||(String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})})}function b(a,b){$("#feedbackText").show(),$.ajax({url:"/markomposition/public/resources/texts/"+b,success:function(b){a.textInput.val(b),$("#feedbackText").hide()}})}define("Config",["jquery"],function(a){"use strict";return{submitBtn:a("#submitBtn"),textInput:a("#textInput"),numWordsInput:a("#numWordsInput"),poem:a("#poem")}}),require.config({baseUrl:"/markomposition/public/resources/scripts",paths:{jquery:"/markomposition/public/vendor/jquery.min"}}),require(["jquery","app.config","generate"],function(c,d,e){"use strict";a(d),d.submitBtn.off("click"),d.submitBtn.click(e),c("#dickinson").click(function(){b(d,"dickinson.txt")}),c("#dante").click(function(){b(d,"divine_comedy.txt")}),c("#grimm").click(function(){b(d,"grimm.txt")})}),define("Generate",["app.config"],function(a){"use strict";var b,c,d,e,f=function(a,c){var d;for(d=0;c>d;d++)b.push(a)},g=function(a){return a[Math.floor(Math.random()*a.length)]},h=function(a){var b,d=[];for(b=0;e>b;b++)d.push(c[a+b]);return d},i=function(a){var b,c=[];for(b=1;e>b;b++)c.push(a[b]);return c.push(g(d[a].nextWords)),c},j=function(a){switch(b=[],a){case"most":f("&#160;",50),f("&#160;&#160;",25),f("&#160;&#160;&#160;&#160;&#160;",25),f("<br>",20),f("<br><br>",20),f("<br>&#160;",20),f("<br>&#160;&#160;",20),f("<br>&#160;&#160;&#160;&#160;",20);break;case"medium":f("&#160;",100),f("&#160;&#160;",25),f("<br>",25),f("<br>&#160;",25),f("<br>&#160;&#160;",25);break;default:f("&#160;",175),f("<br>",25)}};return function(){var f,k,l,m=a.textInput.val(),n=parseInt(a.numWordsInput.val()),o=$('input[name="enjambmentInput"]:checked').val(),p=[];for(m.replace("\n","<br>"),m.replace("	","&#160;&#160;&#160;&#160;"),c=m.split(" "),d={},e=parseInt($('input[name="chainInput"]:checked').val()),j(o),l=0;l<c.length-e;l++){var q=h(l);void 0===d[q]&&(d[q]={tuple:q,nextWords:[]}),d[q].nextWords.push(c[l+e])}for(var r in d)d.hasOwnProperty(r)&&void 0!==d[r].tuple&&p.push(d[r].tuple);for(f=g(p),k=f[0],l=1;l<f.length;l++)k+=g(b)+f[l];for(l=0;n-e>l&&void 0!==d[f];l++){var s=i(f);k+=g(b)+s[e-1],f=s}a.poem.html(k)}})}();